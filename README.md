# Diploma

ДИПЛОМНАЯ РАБОТА

по программе обучения “Аналитик данных с нуля до middle”

на тему:

"Анализ данных о видеоиграх (поиск инсайтов, составление рекомендаций стейкхолдерам, построение функции рекомендаций игр)"

_______________________

Постановка задачи.

Введение.

В настоящее время видеоигры плотно закрепились в индустрии развлечений, встав в один ряд с видеоконтентом, музыкой и спортивными событиями. Более того, индустрия видеоигр постоянно растёт и развивается, оказывая влияние и на другие сферы развлечений, равно как и на нашу жизнь в целом. Вместе с новыми играми появляются и новые игровые сообщества, а некоторые игры наряду с их героями уже давно приобрели статус культовых. Даже за время пандемии гейминг не только укрепил свои позиции среди других развлечений, но и показал заметный прирост популярности, о чем свидетельствуют растущие доходы видеоигровой индустрии.

Становится очевидно, что видеоигры интересны не только для детей и подростков. Сегодня сфера видеоигр ориентируется на широкий круг потребителей, стараясь найти подход к каждому пользователю и привлечь его внимание. 

Любая современная индустрия для достижения бизнес-целей опирается на работу с данными. А значит, и видеоигровая не является исключением. Как на основе данных можно помочь пользователю сделать правильный выбор, удовлетворяющий его вкусы и предпочтения? Один из вариантов - обратиться к его собственному игровому опыту.

_______________________

Цель работы. 

Основные цели работы - провести анализ данных о видеоиграх, выявить особенности в имеющихся данных и сформировать рекомендации стейкхолдерам на их основе, а также реализовать на основе данных функцию рекомендаций, которая будет предлагать видеоигры на основе опыта пользователя.

_______________________

Определение круга стейкхолдеров и сбор бизнес-требований.

Данное исследование будет полезно сервису, который занимается распространением видеоигр.

* Функция рекомендаций поможет пользователям таких сервисов совершить покупку по персональной рекомендации, основанной на их собственном игровом опыте.

* Контент-менеджеры сервисов смогут на основе данных формировать информативные подборки и рейтинги для привлечения интереса пользователей к имеющимся продуктам

* Отдел, отвечающий за расширение ассортимента цифровых продуктов, сможет использовать систему рекомендаций для улучшения и пополнения видеоигрового ассортимента сервиса.

В данной работе важно использовать все имеющиеся данные. Для поиска наиболее близких соответствий между играми в процессе реализации функции рекомендаций необходимо определить тип рекомендательной системы, который будет наиболее эффективно использовать все данные.

_______________________

Основные шаги для достижения поставленной цели.

1.Знакомство со структурой и содержанием набора данных и их описание.

2.Предварительная обработка и изучение имеющихся данных.

3.Работа с данными:

* вывод основных статистик
* построение визуализаций

4.Составление рекомендаций стейкхолдерам.

5.Создание функции рекомендаций:

* выбор оптимального типа рекомендательной системы
* отбор ключевых слов в описании игровых тайтлов
* преобразование метаданных видеоигр
* реализация функции рекомендаций
* проверка работоспособности функции

6.Подведение итогов.

_______________________

Данные.

Знакомство со структурой и содержанием набора данных и их описание.

Набор данных "Games of All Time from Metacritic" взят с ресурса Kaggle и представлен в формате CSV.

Количество строк в датасете - 8831. Строки содержат информацию по играм, представленным в списке выпущенных игр за всё время и на всех платформах с сайта-агрегатора Metacritic.

Датасет содержит 10 столбцов:
* ‘game_name‘ - название видеоигры
* ‘meta_score‘ - средняя оценка, выставленная критиками
* ‘user_score‘ - средняя оценка, выставленная пользователями (переведена в соответствующий оценкам критиков разряд)
* ‘platform‘ - игровая платформа, на которой представлена игра
* ‘description‘ - описание игры (сюжет, элементы геймплея и т.д.)
* ‘url‘ - страница игры на сайте Metacritic
* ‘developer‘ - студия-разработчик игры
* ‘genre‘ - игровой жанр
* ‘type‘ - тип игры (одиночная/многопользовательская)
* ‘rating‘ - возрастной рейтинг игры.

_______________________

Предварительная обработка и изучение имеющихся данных.

В столбце ‘rating’ возрастной рейтинг представлен в виде сокращения от полного наименования, в некоторых случаях в виде одной буквы. Для того,чтобы конкретизировать имеющиеся значения столбца ‘rating’ и отличать их от простых букв при дальнейшей работе, следует отредактировать значения путем приписки 'Rating_' к содержимому.

Также нужно обратить внимание на то, что в рейтинговой системе “Entertainment Software Rating Board (ESRB)” рейтинг ‘К-А’ в 1998 году был заменён на ‘Е’. Имеет смысл объединить оба значения в одно - 'rating_E'. 

В столбцах 'developer', 'genre', 'type' и 'rating' есть пропуски в значениях. Они будут заменены на 'NULL', так как определить реальные значения не представляется возможным.

В средних оценках критиков и пользователей наблюдаются экстремально низкие значения.

Для каждого игрового тайтла значение столбца ‘platform’ представлено как совокупность всех игровых платформ, для которых игра была выпущена. Среди игровых тайтлов есть как игры, выпущенные эксклюзивно для конкретной платформы, так и представленные сразу на нескольких устройствах.

Проверка описаний к видеоиграм на наличие дублей показала, что у нескольких игр описания одинаковые. Вероятно, описания намеренно дублировали либо для игр одной франшизы со схожим сюжетом, либо для разных версий одного игрового тайтла.

Также важно отметить, что у нескольких игр вместо описания стоит значение ‘None’. Они будут заменены на 'NULL', аналогично другим пропускам значений.

Данные о разработчиках показывают, что есть как известные опытные разработчики с большим количеством выпущенных игр, так и студии с единственным игровым продуктом.

Так как видеоигра обычно предполагает несколько жанров, значение столбца ‘genre’ представлено их комбинацией для каждой игры. Присутствуют как популярные жанровые комбинации, так и уникальные сочетания.

Одиночные и мультиплеерные игры занимают примерно равные доли.

Представленные в датасете игры получили различные возрастные рейтинги - всего 6.

Все строки набора данных уникальны. Игровые тайтлы и ссылки на страницы игр на ресурсе metacritic.com не дублируются.

_______________________

Работа с данными.

Оценки пользователей и критиков.

Средние оценки критиков и пользователей каждого игрового тайтла распределились практически по всей стобалльной шкале.

У критиков минимальная средняя оценка - 11,0 баллов, максимальная - 99,0, мода - 80,0. У пользователей минимальная средняя оценка - 2,0 балла, максимальная - 98,0, мода - 77.0.

Медианное значение средних оценок критиков - 73,0 балла, пользователей - 72,8 балла.

Половина средних выставленных критиками баллов находится в промежутке между 63 и 80 баллами, а средние оценки игроков - между 63 и 79 баллами.

Значения среднего балла ниже 37,5 баллов от критиков и ниже 39 от пользователей воспринимаются как аномальные.

Можно заметить, что критики более щедры на выставление очень высоких средних баллов играм.

Интересная особенность: в рамках наблюдения за распределением средних пользовательских оценок можно заметить, что чем выше средняя оценка,тем больше видеоигр эту оценку получают вплоть до значения моды - 77.0 баллов. Можно сделать вывод, что пользователи в своём большинстве лояльны в своих оценках к играм.

_______________________

Статистика оценок.

Топ-10 высокооцененных видеоигр:

Игры, вошедшие в топ-10 по версии критиков и пользователей,получили средние оценки выше 90 баллов.

В обоих случаях встречаются как игры, выпущенные довольно давно, так и современные игровые тайтлы.

Самая лучшая игра:
* по версии критиков - ”The Legend of Zelda: Ocarina of Time”
* по версии пользователей - “After Burner Climax”

Интересная особенность: ни одна игра не попала в 10 лучших по мнению одновременно и критиков, и пользователей.

Топ-10 разработчиков по среднему арифметическому средних оценок их проектов среди критиков/ пользователей:

В топы попали разработчики, отличившиеся высоким средним баллом средних оценок их релизов - в основном независимые команды энтузиастов и малоизвестные студии, выпустившие сравнительно мало игровых тайтлов, но снискавшие высокую оценку за них.

Самые лучшие видеоигры у разработчиков:
* по версии критиков - “HuneX”
* по версии пользователей - “historia Inc” и “Vanilla Ware”

Интересная особенность: только одна студия попала в оба списка - "Wube Software LTD.". Можно заметить, что и критики, и пользователи были единодушны - результат по обеим категориям составляет 91 балл.

_______________________

Статистика игровых платформ.

Следует определить, для каких платформ и в каком объеме выпускаются видеоигры. Предварительно наборы нужно разбить на отдельные платформы.

При подсчете объема выпущенных игр с большим отрывом лидирует ПК - 3108 видеоигр, следом идёт “Playstation 4” - 1344 видеоигры, затем “Xbox-360” - 1015 игр.

Стоит предположить, что персональный компьютер в качестве игровой платформы наиболее популярен из-за:
* широкого распространения среди пользователей
* возможности модернизации его компонентов
* поддержка дополнительных устройств передачи информации

Эти особенности делают ПК универсальной игровой платформой.
 
Топ кроссплатформенных игр:

В топе представлены игровые тайтлы, поддерживаемые 6 и более платформами.
Наиболее часто представленная на платформах игра “Madden NFL 07” - 9 игровых платформ.

Интересная особенность: 5 игровых тайтлов из 9 представленных - это спортивные симуляторы.

_______________________

Статистика разработчиков

Топ-10 разработчиков по количеству выпущенных ими игр.

Лидером по количеству цифровых релизов является разработчик “Capcom” - 150 игр.

Топ-10 разработчиков по охвату платформ.

Лидером по охвату платформ также является “Capcom” - 19 различных устройств.

Помимо “Capcom” в оба топ-листа вошли и другие разработчики:
* “Konami” - 86 релизов на 15 платформах,
* “Ubisoft” - 65 релизов на 16 платформах,
* “Ubisoft Montreal” - 62 релизов на 17 платформах,
* “EA Canada” - 60 релизов на 14 платформах,
* “Sega” - 57 релизов на 17 платформах.

_______________________

Статистика жанров.

Наиболее часто у видеоигр встречается комбинация из жанров
“ 'Action', 'Platformer', '2D' ”.

В качестве отдельного жанра у разработчиков наиболее популярны ‘Action’, ‘General’, ‘Action Adventure’, ‘Shooter’ и ‘Role-Playing’.

_______________________

Возрастной рейтинг.

Всего в датасете представлено 6 возрастных рейтингов. Больше всего игр с рейтингом "TEEN" (от 13 лет и старше) - 2636 тайтлов.

Также стоит заметить, что в данных есть 14 игровых тайтлов, отмеченных рейтингом 'RP' - это означает, что на момент формирования набора данных эти игры только ожидали присвоения возрастного рейтинга.

_______________________

Рекомендации стейкхолдерам.

Так как в данных содержатся значения средних оценок двух типов, следует определить, какие значения лучше помогут пользователю сервиса при выборе игры. Вероятно, оценка критиков лучше подходит для превью видеоигр, так как авторитетное мнение критиков привлекает внимание к игровому тайтлу лучше. На баллах пользователей следует акцентировать внимание непосредственно на странице игры, так как мнение игрового сообщества может стать решающим при выборе игры. 

Также следует разделять средние баллы оценок в зависимости от игровой платформы. Далеко не всегда игра одинаково корректно работает на всех устройствах из-за проблем с портированием версий на новые платформы, и единая для всех платформ средняя оценка не позволит пользователю выявить такую проблему заранее, что может значительно ухудшить его игровой опыт.

При пополнении коллекции цифровых продуктов сервиса стоит обратить внимание на наиболее высоко оцененных разработчиков - их новые издания в перспективе могут повторить успех уже имеющихся тайтлов. 

Также при выборе новых игр для пополнения коллекции следует сделать упор на:
* тайтлы, поддерживаемые ПК (из-за большой распространенности платформы)
* тайтлы, представленные на нескольких платформах (охват большой аудитории)
* тайтлы разработчиков, лидирующих по охвату игровых платформ и количеству выпущенных игр 
* тайтлы в наиболее часто встречающихся жанрах (такие жанры явно востребованы больше других)

_______________________

Требования к данным:

Возрастная рейтинговая система может значительно отличаться в зависимости от страны - в дальнейшем это важно учесть для пользователей сервиса из других стран.

Добавление страны выпуска и даты выхода видеоигр к собираемым данным могли бы значительно повысить ценность данных и помогли бы найти новые закономерности.

Также необходимо снизить количество пропусков  в данных, что должно положительно сказаться и на качестве данных, и на выводах, полученных на основе анализа.

_______________________

Создание функции рекомендаций.

Выбор оптимального типа рекомендательной системы.

В данных по видеоиграм преимущественно содержатся характеристики игровых тайтлов, а именно: жанр, платформа, тип игры, разработчик, возрастной рейтинг. Исходя из этого, оптимальным вариантом реализации рекомендательной системы будет функция, составляющая рекомендацию на основе метаданных игровых тайтлов.

Так как необходимо максимально повысить качество рекомендаций, нужно будет задействовать в работе всю имеющуюся о каждой видеоигре информацию.

В качестве допущения, числовые значения средних оценок критиков и пользователей будут восприниматься, как метаданные.

Содержимое столбца “url” уникально для каждой видеоигры, а для будущей функции такие данные не несут ценности, поэтому значения этого столбца не будут использованы.

Содержимое столбца “description” - это текстовые описания геймплея и сюжета видеоигр. Сама по себе эта информация в перспективе имеет большую ценность, но в данном виде значительно засорена, и использовать её в качестве метаданных нецелесообразно. Необходимо выявить ключевые слова, содержащиеся в описаниях, чтобы в дальнейшем использовать их для повышения качества работы функции. 

_______________________

Отбор ключевых слов в описании игровых тайтлов.

Для начала нужно определить слова, используемые в описаниях наиболее и наименее часто.

Наиболее часто употребляемые слова - это артикли, предлоги, союзы и местоимения.

Реже всего встречаются названия и имена собственные. Также в этом списке много слов, которые считаются уникальными из-за написания с заглавной буквы.

Дополнительно стоит отметить "засоренность" описаний игр знаками пунктуации.

_______________________

Меры по очистке данных:

* Приведение описания в нижний регистр и очистка от знаков пунктуации и числительных.
* Исключение шумов в виде очень часто встречающихся слов.
* Приведение слов из описаний к словарной форме.

Для исключения шумов используется готовый список “стоп-слов” из библиотеки “SpaCy”, к которому будут добавлены:

* слова игровой тематики, такие как "игра" или "игрок"
* слова, попавшие в таблицу часто используемых
* 'NULL', используемый как индикатор отсутствия значения в ячейке.

Далее слова из описаний нужно привести к словарной форме с помощью лемматизации из той же библиотеки, а затем удалить появившиеся в результате лемматизации слов дубли.

Полученный результат будет записан в новый датафрейм, включающий названия игр и ключевые слова к играм. Далее ключевые слова будут включены в метаданные для использования в функции рекомендаций.

_______________________

Преобразование метаданных видеоигр.

Сначала нужно создать копию датасета для внесения изменений в начальные данные. Столбцы с описаниями и ссылками более не понадобятся. Также из ячеек будет убрано всё, что может помешать воспринимать данные, как уникальные, включая пробелы и лишние квадратные скобки.

Для удобства содержимое ячеек с метаданными будет представлено в виде списков, а к отредактированному датафрейму будет присоединен столбец с ключевыми словами.

Для дальнейшей работы создан столбец, который будет включать в себя все метаданные, имеющиеся по каждой видеоигре. 

Единый столбец всех метаданных нужен, чтобы на основе его содержимого создать матрицу с числовыми данными векторов метаданных при помощи метода “CountVectorizer” библиотеки “scikit-learn”, а затем вычислить косинусное сходство этих векторов, пользуясь “cosine_similarity”.

Сходство косинуса измеряет сходство между списками векторов путем вычисления угла косинуса между двумя списками векторов.

Если рассматривать функцию косинуса, ее значение при 0 градусах равно 1 и -1 при 180 градусах. Это означает, что для двух перекрывающихся векторов значение косинуса будет максимальным, а для двух точно противоположных векторов - минимальным .

В результате преобразований будет получен многомерный массив значений косинусного сходства векторов метаданных каждого игрового тайтла.

_______________________

Реализация функции рекомендаций.

Для дальнейшего сопоставления полей данных нужно создать структуру с индексами и названиями видеоигр.

В качестве данных для ввода будет использоваться название "основной" видеоигры, по данным о которой функция будет искать совпадения.

Используя индекс "основной" видеоигры, функция создает пронумерованный список из значений косинусного сходства векторов метаданных каждой игры с вектором "основной", и сортирует этот список по убыванию величины сходства.

Первое значение в списке игнорируется, так как наибольшее сходство с “основной” игрой имеет сама “основная” игра.

Затем у следующих 10 значений списка берутся индексы.

В результате работы функция возвращает по этим индексам названия 10 игр, наиболее близких по косинусному сходству векторов их метаданных с вектором метаданных "основной" игры. 

Также в результате отобразится полезная информация об этих играх (компания-разработчик, игровые платформы, средние оценки игроков и критиков).

_______________________

Проверка работоспособности функции.

В качестве видеоигры для проверки работоспособности функции была взята игра “Batman: Arkham City”. 

Это одиночная видеоигра в жанре “Action Adventure” по сюжету, взятому из комиксов компании “DC”. Протагонист игры - супергерой Бэтмен. Её порядковое место в ранее созданной структуре индексов - 4554. 

Логика косинусного сходства предполагает, что чем ближе значение к 1, тем больше сходство между векторами метаданных, а соответственно и играми. 

Отсортированный по убыванию список 10 наибольших значений косинусного сходства показывает, что у самой близкой к  “Batman: Arkham City” игры значение косинусного сходства - “0.4627381113705622”, а у самой отдаленно похожей из списка - “0.2247332874877473”. 

Теперь рассмотрим итоговый результат, а именно набор данных, отфильтрованный по значениям индексов рекомендованных игр:

* все рекомендованные игры по сюжету можно отнести к супергероике
* действия всех игр разворачиваются в вымышленных мирах, созданных на основе сюжетов комиксов
* в 7 игровых тайтлах Бэтмен выступает протагонистом, исходя из их названий.

_______________________

Итоги.

В результате проделанной работы был проведен анализ имеющихся данных, показавший ряд важных особенностей. Их рекомендуется учитывать при улучшении качества работы видеоигрового сервиса.

На основе набора данных была реализована функция видеоигровых рекомендаций, основанных на принципе косинусного сходства числовых значений векторов метаданных видеоигр. 

Реализованная функция отвечает поставленным задачам и выдает корректные рекомендации, основанные на схожести метаданных. Интеграция функции в работу видеоигрового сервиса поможет увеличить количество, и значительно улучшить качество предоставляемых пользователям сервиса возможностей.
